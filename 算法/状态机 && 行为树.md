# 状态机 && 行为树

状态机是==有限状态自动机==的简称，==是现实事物运行规则抽象而成的一个数学模型。==

## 1. 状态机的四个概念

### 1. `state`

状态。一个状态机至少要有两种状态。

### 2. `event`

事件。执行某个操作的触发条件。

### 3. `action`

事件发生后的动作。

### 4. `transition`

变换。从一个状态变换成另一个状态。



## 2. 行为树

是一种用于实现非人工角色复杂行为的工具。在游戏中主要用于定义`NPC`的行为。

行为树节点类型：

![image-20240205112456144](C:\Users\maoqin01\AppData\Roaming\Typora\typora-user-images\image-20240205112456144.png)

行为树结点的一次触发称为一次`tick`，会返回**成功(`success`)**，**失败(`failure`)**，**运行中(`running`)**的状态信息给它的父结点。

执行节点(**execution node**)：行为树的叶子结点，可以是动作结点(action node)或条件结点(condition node)。对于条件结点(condition node)会在一次tick后立马返回**成功**或**失败**的状态信息。

**控制结点(control node)：**控制结点是行为树的非叶子结点，它们定义了遍历其孩子结点的方式。控制结点的孩子可以是执行结点，也可以是控制结点。
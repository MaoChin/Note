# 信号和槽

## 1. 概念

在Qt中，用户和控件的每次交互过程称为一个事件，比如点击按钮，移动鼠标等。而**每个事件都会发出一个信号。对信号做出的响应动作就称之为槽，本质就是一个响应/回调函数。**    

**槽函数可以与一个信号关联，当信号被发出时，关联的槽函数被自动执行。**就是回调函数。

信号和槽是Qt中各个控件之间的通信交互方式。==目的就是为了响应用户的操作。==

## 2. 信号和槽的使用

 通过`connect`函数把信号和槽进行关联，当触发某个信号时就会调用对应的槽函数。

`connect`函数是`QObject`类提供的一个静态成员函数。`QObject`类是Qt内置的父类，Qt中提供的很多类都是直接或者间接继承自`QObject`。  

## 3. 自定义信号和槽

### 3.1 自定义槽

在Qt5之后，槽函数的声明和实现和普通的函数没有什么区别了，早期的Qt版本要求槽函数必须写到 "public slots" 下  。

槽函数的返回值必须是`void`。

### 3.2 自定义信号（很少用）

1. 自定义信号函数必须写到 "signals" 下
2. 返回值为void，只需要声明，不需要实现。实现是Qt在编译的过程中自动实现的。

### 3.3 发送信号

使用 "emit" 关键字发送信号。  

### 3.4 带参数的信号和槽

Qt的信号和槽函数也支持带有参数，同时也可以支持重载，此时信号函数的参数列表要和对应连接的槽函数参数列表一致。（参数类型要一致，信号函数的参数个数可以大于槽函数的参数个数）

这样信号触发时就可以把信号函数中的参数传递到槽函数中了。  

## 4. 说明

### 4.1 信号和槽的初心

设计信号和槽的主要目的：

1. 将信号的发出和信号的处理 ==解耦。==
2. ==为了实现 “多对多” 的关系模型！！==即一个信号可以连接多个槽函数，一个槽函数也可以被多个信号关联。（但是在实际客户端开发中这种 “多对多” 的关系非常少见）

### 4.2 断开信号和槽的关联

使用`disconnect`函数。

### 4.3 `lambda`表达式

当槽函数比较简单且是一次性使用时可以考虑把槽函数写成 `lambda`表达式：`[](){}`

因为`lambda`表达式==本质上就是回调函数==，所以使用`lambda`表达式的捕捉列表时需要注意：确保捕捉到的上层作用域的变量随时可用！！


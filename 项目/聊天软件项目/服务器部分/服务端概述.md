# 服务端概述

服务端总体采用微服务的思想进行开发，所谓微服务，其实就是把一个大的业务拆分成多个子业务，==然后分别编写不同的子业务，并可以把子业务部署在不同的机器上==，然后由网关服务统一接收客户端的请求并进行分发，各个业务的服务器处理完成后也是把响应发送给网关服务，再由网关服务转发给客户端。

微服务的设计思想：

1. 服务拆分：将应用程序拆分成多个小型服务，每个服务负责一部分业务功能，具
   有独立的生命周期和部署  
2. 独立部署：每个微服务可以==独立于其他服务进行部署、更新和扩展== 
3. 弹性和可扩展性：微服务架构支持服务的动态扩展和收缩，以适应负载的变化  
4. 去中心化数据管理：每个服务管理自己的数据库，数据在服务之间是私有的，这
   有助于保持服务的独立性  
5. 服务发现：服务实例可能动态变化，需要服务发现机制来动态地找到服务实例  

### 1. 网关服务

直接和客户端打交道的服务，接收客户端请求后进行==鉴权操作==，就是通过（session）的机制判断用户是否是登录状态。

然后转发客户端的不同请求到不同的服务器！服务器返回响应也是先返回给网关服务，再由网关服务转发给客户端。

### 2. 服务发现

注册了所有 处理请求 对应服务器地址。这一网关服务才知道哪些请求要发往那台机器！！

所有提供服务的服务器在上线时都需要在服务发现这里进行注册，在下线的时候也要通知服务发现 取消注册。

`Etcd`：分布式、高可用的一致性键值存储系统，用于项目中实现服务注册与发现
功能的框架  

### 3. HTTP通信

一问一答模式

### 4. WebSocket通信

服务端主动给客户端推送通知。

### 5. 具体的子服务

1. 网关服务
2. 用户管理服务
3. 好友管理服务（包括了会话管理）
4. 消息转发服务（主要是转发网关服务的消息到各个子服务）
5. 消息存储（包括文件存储）
6. 语音识别服务

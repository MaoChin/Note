# 项目--网页视频播放器

总体模块划分：

![image-20231122191222082](E:\Note\项目\项目--网页视频播放器.assets\image-20231122191222082.png)

## 1. 环境搭建

需要的环境：`gcc 7`以上，`gdb`，`mysql`以及其他常用工具。

## 2. 第三方库介绍

需要安装的第三方库：`jsoncpp`，`httplib`

```shell 
# ubuntu下
sudo apt install libjsoncpp-dev
sudo apt install libcpp-httplib-dev
```

### 1. `json`介绍

一种常用的`key-value`数据传输格式，整体是一个字符串！主要分为对象，数组，字符串，数组四大类。

1. 对象：用 `{}`括起来的就是一个对象。
2. 数组：用 `[]` 括起来的就是一个数组。
3. 字符串：不多说。
4. 数字：分为整型和浮点型两类。

```json
// json格式示例
[
  {
    "姓名" : "小明",
    "年龄" : 18,
    "成绩" : [88.5, 99, 58]
  },
  {
    "姓名" : "小黑",
    "年龄" : 18,
    "成绩" : [88.5, 99, 58]
  }
]
```

`jsoncpp`就是用来进行`json`格式的序列化和反序列化的库。

一个关键类：`Json::Value`

```C++
//Json数据对象类
class Json::Value{
  //Value重载了[]和=，因此所有的赋值和获取数据都可以通过
  Value &operator=(const Value &other); 
  //简单的方式完成 val["姓名"] = "小明";
  Value& operator[](const std::string& key);
  Value& operator[](const char* key);
  Value removeMember(const char* key);  //移除元素
  const Value& operator[](ArrayIndex index) const; //val["成绩"][0]
  //添加数组元素val["成绩"].append(88);
  Value& append(const Value& value);
  //获取数组元素个数 val["成绩"].size();
  ArrayIndex size() const;
  //转string string name = 
  std::string asString() const;val["name"].asString();
  //转char* char *name = 
  const char* asCString() const;val["name"].asCString();
  //转int int age = val["age"].asInt();
  Int asInt() const;
  float asFloat() const;  //转float
  bool asBool() const;    //转 bool
};
```

序列化方法：`Value`对象 --> `json`串

```C++
//json序列化类，高版本推荐，如果用低版本的接口可能会有警告
// 抽象类
class JSON_API StreamWriter {
  // 纯虚函数
  virtual int write(Value const& root, std::ostream* sout) = 0;
}
class JSON_API StreamWriterBuilder : public StreamWriter::Factory {
  virtual StreamWriter* newStreamWriter() const;
}
```

反序列化方法： `json`串 --> `Value`对象

```C++
//json反序列化类，高版本更推荐
class JSON_API CharReader {
	virtual bool parse(char const* beginDoc, char const* endDoc,
  	Value* root, std::string* errs) = 0;
}
class JSON_API CharReaderBuilder : public CharReader::Factory {
  virtual CharReader* newCharReader() const;
}
```

`jsoncpp`的机制流程图：

![image-20231122213535640](E:\Note\项目\项目--网页视频播放器.assets\image-20231122213535640.png)

### 2. `httplib`介绍





## 3. 服务端数据管理模块



## 4. 网络通信模块



## 5. 业务处理模块



## 6. 前端模块








# 集群

横向扩展，通过添加更多的节点（`RabbitMQ`服务器）来线性地扩展消息通信的吞吐量，当一个`RabbitMQ`节点宕机时，客户端能够重新连接到集群中的任何其他节点并继续生产或者消费。  

### 1. 仲裁队列（`Quorum Queues`）

`RabbitMQ`的仲裁队列是一种基于`Raft`一致性算法实现的持久化、可复制的`FIFO`队列，仲裁队列提供队列复制的能力，保障数据的高可用性和安全性，使用仲裁队列可以在`RabbitMQ`集群节点间进行队列数据的复制，从而达到在一个节点宕机时，队列仍然可以提供服务的效果。  

#### `Raft`算法

一种共识算法。常见的共识算法有：`Paxos, Raft, Zab`等：

1. `Paxos`：一种经典的共识算法，用于解决分布式系统中的一致性问题。
2. `Raft`：一种较新的共识算法，`Paxos`不易实现，`Raft`是对`Paxos`算法的简化和改进，旨在易于理解和实现。  
3. `Zab`：`ZooKeeper`使用的共识算法，基于`Paxos`算法，大部分和`Raft`相同。  

一些`Raft`算法的概念：

1. 主节点（`Leader`）
2. 从节点（`Follower`）
3. 候选人（`Candidate`）
4. 选举主节点的操作，选主（`Leader election`）
5. 任期（`Trem`）

#### 消息复制

主节点负责和生产者消费者通信，然后把更改同步到从节点：

![image-20241213121114285](E:\Note\RabbitMQ\集群.assets\image-20241213121114285.png)



